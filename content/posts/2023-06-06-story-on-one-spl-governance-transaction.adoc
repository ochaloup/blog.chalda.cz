= Story of one SPL Governance transaction
chalda <ondrej.chaloupka@proton.me>
1.0, 2023-05-21-06-06

:page-template: post
:page-draft: true
:page-slug: spl-governance-transaction
:page-category: solana
:page-tags: Solana, Typescript, SPL.Governance
:page-description: A story of developer creating a SPL Governance transaction
:page-socialImage:  /images/articles/spl-custom-transaction/spl-governance-story.jpg

image::articles/spl-custom-transaction/spl-governance-story.jpg[]

I want to share a story of an ordinal developer that gets a task and during the process he comes to learn various things
and details in different contexts. This story is about Solana SPL Governance and creating a custom proposal.

== SPL Governance as multisig manager

The https://github.com/solana-labs/solana-program-library/blob/master/governance/[SPL Governance] is a Solana program that runs DAO management.
One https://app.realms.today/realms[can create] his own DAO instance in the system and use the SPL Governance for community to manage the DAO.
But another good usage is to use it as multisig. For that one creates a new DAO where no community is involved and only particular wallets
has permission to proceed with signatures. A benefit of the https://twitter.com/realms_daos[SPL Governance] system is that's part of
the Solana Program Library and thus it's developed by people from https://solanalabs.com[Solana Labs].

This is simple as go to https://app.realms.today/ (when testing the setup at devnet add https://app.realms.today/?cluster=devnet[?cluster=devnet]),
click at blue button `Create DAO` and choose the `Multi-Signature Wallet`. The wizard goes with you through few steps
where one defines what wallet keys will be part of the multisig management (members of the multisig may be still added or removed later)
and then the multisig DAO is created.

NOTE: For the purpose of the showcase in this blogpost I have created a DAO
      https://app.realms.today/dao/3dCuPQwNCnKpNYoza8knrS4yZdWVVXpW23tm81NtmuVj?cluster=devnet[3dCuPQwNCnKpNYoza8knrS4yZdWVVXpW23tm81NtmuVj
      with one member https://app.realms.today/dao/3dCuPQwNCnKpNYoza8knrS4yZdWVVXpW23tm81NtmuVj/members?cluster=devnet[EAdTfAHBV6DmWb4u73Q6R1wFzP35ChWLheCQSX56LgEG].

Any action that the multisig signs have to be defined as a `Proposal` that contains transactions that are confirmed and may be executed
when enough multisig participants agree with.
At the main page of the DAO one click at `âŠ• New Proposal`. When the member wallet is connected a new `Proposal` can be created and then multisig owners
can vote for or against it. The SPL Governance system provides a list of `Instruction` types where one can send funds
or work with https://spl.solana.com/token[token accounts]. But what if my custom contract contains some admin abilities that I need to manage?

NOTE: the SPL Governance Proposal workflow is first to create a `Proposal` with one or several instructions.
      Multisig members votes for the proposal. When the defined threshold of votes (signatures) is exceeded then
      the instruction that constitute the `Proposal` can be executed. That set of instructions are signed
      by the multisig address represented by `Governance Wallet`. When transactions are executed the `Proposal`
      can be finalized. That "parks" the `Proposal` to the state and for the system recognize it as a finished matter.

=== SPL Governance Custom Transaction

For anybody can create a `Proposal` with whatever transaction content there is Instruction type `Execute custom Instruction`.
At `Governance` we defines the multisig signature key that the transaction will be signed with
and the `Instruction` field has tobe filled with `Base64` serialized Solana instruction.

Ok, but where to take it?